{% extends "base.html" %}

{% block content %}

<style>
    .btn-custom {
        background-color: #ac2b37;
        border: 1px solid #000000;
    }
    .btn-custom:hover {
        background-color: #961f2a;
    }
</style>
    <!-- info abotu the research position -->
    <h1>{{ position.title }}</h1>
    <p>Wanted GPA: {{ position.wantedGPA }}</p>
    <p>Languages: {{ position.languages }}</p>
    <p>Description: {{ position.description }}</p>
    <p>Research Goals: {{ position.researchGoals }}</p>
    <p>Desired GPA: {{ position.wantedGPA }}</p>
    <p>Required Programming Languages: {{ position.languages }}</p>
    <p>Time Commitment: {{ position.timeCommitment }} hours/week</p> 
    <p>Start Date: {{ position.startDate.strftime('%B %d, %Y') }}</p>
    <p>End Date: {{ position.endDate.strftime('%B %d, %Y') }}</p>   

    <!-- Info about the faculty member who posted the research position -->
    <div class="faculty-details">
        <h4>Posted By:</h4>
        <p>Name: {{ get_faculty(position.faculty).firstname }} {{ get_faculty(position.faculty).lastname }}</p>
        <p>Phone Number: {{ get_faculty(position.faculty).phone_number }}</p>
        <p>Email: {{ get_faculty(position.faculty).email }}</p>
        <p>Department: {{ get_faculty(position.faculty).department }}</p>
        <p>Research Areas:</p>
            {% for area in get_faculty(position.faculty).research_areas %}
                <li>{{ area.title }}</li>
            {% endfor %}

    </div>

    <!-- Decide which buttons to show based on who is looking at the post -->
    {% if current_user.is_authenticated %}
        {% if current_user.user_type == 'Student' %}
            {% if current_user.has_applied_to_position(position.id) %}
                <form action="{{ url_for('routes.unapply_for_position', position_id=position.id) }}" method="post">
                    <button type="submit" class="btn btn-danger">Unapply</button>
                </form>
            {% else %}
                <form action="{{ url_for('routes.apply_for_position', position_id=position.id) }}" method="post">
                    <button type="submit" class="btn btn-primary btn-custom">Apply</button>
                </form>
            {% endif %}
        {% endif %}
    {% endif %}
    
{% endblock %}
